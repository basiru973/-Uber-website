"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[8139],{88789:(e,t,o)=>{o.d(t,{Sh:()=>n,U0:()=>l,k6:()=>r,xV:()=>i});const n=1,i={DESTINATION_INPUT:"destination location input",DESTINATION_LOCATION_DROPDOWN:"destination location dropdown",PICKUP_INPUT:"pickup location input",PICKUP_LOCATION_DROPDOWN:"pickup location dropdown"},l={ASK_LOCATION_ACCESS:"ASK_LOCATION_ACCESS",SELECT_CURRENT_LOCATION:"SELECT_CURRENT_LOCATION"},r={askLocationAccessOption:{subtitle:"It provides your pickup address",title:"Allow location access"},fetchingLocationOption:{subtitle:"It provides your pickup address",title:"Fetching your location..."},useCurrentLocationOption:{subtitle:"Use your current location as pickup address",title:"Your location"}}},96584:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(74369);const i=e=>{let{autoPopulateWithCurrentLocation:t,currentLocation:o,fetchCurrentLocation:i,loadPlaceDetails:l,touched:r,locale:a,locationDetails:s,customAutoPopulate:u,type:c,eventTrackers:d}=e;const p=!s,v=(0,n.useRef)(!1),h=(0,n.useCallback)((e=>{if(i&&p){const{latitude:n=0,longitude:l=0}=e||{};if(n&&l){var t,o;if(v.current=!0,i({lang:a,lat:n,lng:l}),"pickup"===c)null==d||null===(t=d.pickupAutoPopulate)||void 0===t||t.trackVisibleEvents({category:"1",label:"pickup_auto_populate_by_current_location"});if("destination"===c)null==d||null===(o=d.destinationAutoPopulate)||void 0===o||o.trackVisibleEvents({category:"1",label:"destination_auto_populate_by_current_location"})}}}),[i,p,a]);return(0,n.useEffect)((()=>{if(r||!p||v.current)return;const{enabled:e,placeId:n}=u||{};var i,s;e&&n&&l?(l({id:n,locale:a,provider:"",type:c}),v.current=!0,"pickup"===c&&(null==d||null===(i=d.pickupAutoPopulate)||void 0===i||i.trackVisibleEvents({category:"1",label:"pickup_auto_populate_by_place_id"})),"destination"===c&&(null==d||null===(s=d.destinationAutoPopulate)||void 0===s||s.trackVisibleEvents({category:"1",label:"destination_auto_populate_by_place_id"}))):t&&h(o)}),[t,o,u,null==d?void 0:d.destinationAutoPopulate,null==d?void 0:d.pickupAutoPopulate,p,l,a,h,r,c]),{populateCurrentLocation:h}}},90308:(e,t,o)=>{o.d(t,{j:()=>r});var n=o(11489);const i=e=>e?{right:"22px"}:{left:"22px"},l=(e,t,o)=>{const n=parseInt(t,10)+parseInt(o,10);return e?{paddingRight:"".concat(n,"px")}:{paddingLeft:"".concat(n,"px")}},r=e=>{var t,o;let{startEnhancer:r,inputAriaLabel:a,dropdownAriaLabel:s,rtl:u,startEnhancerSize:c,popoverOverrides:d,inputStyleOverrides:p,placeholderStyleOverrides:v,selectPopoverOverlayStyles:h,popoverProps:y,type:L,scrolled:g,handleSetScroll:C}=e;return{ClearIcon:{props:{overrides:{Svg:{style:e=>{let{$theme:t}=e;return{cursor:"pointer",height:t.sizing.scale800,width:t.sizing.scale800}}}}}},Dropdown:{props:{"data-testid":"dropdown",onScroll:()=>{null==C||C(!0)}}},DropdownContainer:{props:{...n.ki,"aria-label":s}},DropdownListItem:{props:{"data-testid":"dotcom-ui.pickup-destination.list-item.".concat(L||"default")}},Input:{props:{"data-testid":"dotcom-ui.pickup-destination.input.".concat(L||"default"),inputmode:g?"none":"text"},style:p},InputContainer:{style:p},Placeholder:{props:{"data-testid":"dotcom-ui.pickup-destination.placeholder.".concat(L||"default")},style:v},Popover:{props:{...y,overrides:{...d,Body:{...null==d?void 0:d.Body,style:{...null==d||null===(t=d.Body)||void 0===t?void 0:t.style,...null==h||null===(o=h.Body)||void 0===o?void 0:o.style}}}}},SearchIcon:{props:{overrides:{Svg:{component:r,props:{size:c||"20"}}}},style:{...i(u),width:"20px"}},SearchIconContainer:{style:{width:c&&"".concat(c,"px")}},SingleValue:{props:{"data-testid":"dotcom-ui.pickup-destination.single-value.".concat(L||"default")}},ValueContainer:{props:{...n.ki,"aria-label":a},style:e=>{let{$theme:t}=e;return{...l(u,t.sizing.scale600,c||"20")}}}}}},15926:(e,t,o)=>{o.d(t,{W:()=>v});var n=o(74369),i=o(97121),l=o(39649),r=o(6941),a=o(55973),s=o(96584),u=o(90308),c=o(87164),d=o(59924);const p=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.negative}}));function v(e){const{type:t,pudoKey:o,locale:i,mapCenter:v,placeholder:h,startEnhancer:y,isLoading:L,rtl:g,locationDetails:C=null,prevStepLocationDetails:m,ariaLabel:S,inputAriaLabel:_,dropdownAriaLabel:O,onOpen:f,onBlur:A,onFocus:b,popoverOverrides:k,controlRef:w,clearFEPlaceDetails:E,loadPlaceDetails:I,showLocationButton:P,onFetchCurrentLocation:T,fetchCurrentLocation:D,currentLocationContent:N,autoPopulateWithCurrentLocation:x,startEnhancerSize:B,errorMsg:R,onSelect:U,onInputChange:z,maxRVPudoDropdownHeight:F,size:V,hideClear:$,geoContext:K}=e,{LocationSelect:W}=n.useContext(l.b),[Q,Z]=n.useState(!0),{scrolled:H,handleSetScroll:X}=(0,a.$y)(),j=n.useRef(!1),[M,q]=n.useState(!1),J=n.useRef(null),{styleOverrides:Y,props:G}=(0,a.UV)(J),ee=(0,a.yH)(C),te=(0,a.TX)(),{currentLocation:oe,loading:ne,permissionState:ie,promptUserForLocation:le}=(0,r.h)({}),{latitude:re,longitude:ae}=(0,n.useMemo)((()=>(0,c.w9)({currentLocation:oe,geoContext:K,locationDetails:C,mapCenter:v,prevStepLocationDetails:m})),[oe,K,C,v,m]),se=(0,c.AE)({currentLocation:oe,currentLocationContent:N,isCurrentLocationLoading:ne,isInputEmpty:Q,locationDetails:C,permissionState:ie,showLocationButton:Boolean(P)}),ue=n.useMemo((()=>(0,c.B)(C)),[C]);return(0,s.A)({autoPopulateWithCurrentLocation:x,currentLocation:oe,fetchCurrentLocation:D,locale:i,locationDetails:C,touched:j.current,type:t}),(0,d.tZ)(d.HY,{children:(0,d.BX)("div",{onClick:()=>{X(!1)},children:[(0,d.tZ)(W,{"aria-label":S,clearable:!$,controlRef:w,disabled:L,error:Boolean(R),inputRef:J,isLoading:L,latitude:re,longitude:ae,maxRVPudoDropdownHeight:F,overrides:{...(0,u.j)({dropdownAriaLabel:O,handleSetScroll:X,inputAriaLabel:_,inputStyleOverrides:ee,placeholderStyleOverrides:te,popoverOverrides:k,popoverProps:{placement:"bottom",popoverMargin:2,popperOptions:{modifiers:{flip:{enabled:!1},preventOverflow:{boundariesElement:"window",enabled:!1}}},...G},rtl:g,scrolled:H,selectPopoverOverlayStyles:Y,startEnhancer:y,startEnhancerSize:B,type:t})},placeholder:h,pudoKey:o,renderRowOrder:e=>M?[...e,...se]:[...se,...e],size:V,value:ue,onBlur:e=>{null==A||A(e)},onChange:e=>{const{option:o}=e;"clear"===e.type?(E(t),q(!1)):!function(e){return Boolean(e&&e.id&&e.provider)}(o)?(0,c._6)({currentLocation:oe,fetchCurrentLocation:D,id:null==o?void 0:o.id,locale:i,onFetchCurrentLocation:T,promptUserForLocation:le}):I((0,c.uJ)({locale:i,option:o,type:t})),null==U||U(o)},onFocus:e=>{null==b||b(e),j.current=!0},onInputChange:e=>{e.target.value&&!M?q(!0):!e.target.value&&M&&q(!1),Z(Boolean(e.target.value)),null==z||z()},onOpen:f}),R&&(0,d.tZ)(p,{children:R})]})})}},87164:(e,t,o)=>{o.d(t,{AE:()=>y,B:()=>v,Vy:()=>r,_6:()=>L,jD:()=>c,mO:()=>a,mX:()=>u,sq:()=>g,uJ:()=>p,w9:()=>h,x3:()=>d});var n=o(90785),i=o("__fusion__9e99649e9d"),l=o(88789);function r(e){return Array.isArray(e)?e.map((e=>({...e,label:"".concat(e.addressLine1).concat(e.addressLine2?", ".concat(e.addressLine2):"")}))):[]}const a=(e,t)=>{let{props:o}=e;const{locale:n,type:i}=o,{lat:l,long:r}=(e=>{let{props:t}=e;const{mapCenter:o,locationDetails:n}=t;return null!=n&&n.lat?{lat:n.lat,long:n.long}:{lat:null==o?void 0:o.latitude,long:null==o?void 0:o.longitude}})({props:o});o.getSuggestions({lat:l,locale:n,long:r,q:t,type:i})},s=(e,t,o)=>{let{state:n}=e;n.setIsDetectionError(t&&o===l.Sh)},u=e=>{var t;let{props:o,state:i}=e;null===(t=o.onFetchCurrentLocation)||void 0===t||t.call(o),s({state:i},!1),(0,n.v)((e=>{var t;null===(t=o.fetchCurrentLocation)||void 0===t||t.call(o,{lang:o.locale,lat:e.latitude,lng:e.longitude})}),(e=>{s({state:i},!0,e.code)}))},c=e=>{if(null==e||!e.id||!e.fullAddress)return[];const{addressLine1:t="",addressLine2:o=""}=e;return[{...e,label:"".concat(t).concat(o?", ".concat(o):"")}]},d=(e,t)=>{let{props:o,state:n}=e;const{type:i,clearFEPlaceDetails:l}=o;if(!Array.isArray(t)||0===t.length)return n.setValue([]),n.setOptions([]),void l(i);!function(e){let{value:t,type:o,locale:n,suggestions:i,loadPlaceDetails:l}=e;const{id:r,provider:a}=t[0]||{};r&&Array.isArray(i)&&i.find((e=>e.id===r))&&l({id:String(r),locale:n,provider:a,type:o})}({value:t,...o})};function p(e){let{option:t,locale:o,type:n}=e;const{id:i="",provider:l=""}=t||{};return{id:String(i),locale:o,provider:l,type:n}}function v(e){if(!e||!e.id)return null;const{id:t="",provider:o="",categories:n=[],...i}=e;return{...i,categories:n,id:t,provider:o,confidence:"UNKNOWN",type:"LOCATION"}}function h(e){var t,o,n,i;let{locationDetails:l,prevStepLocationDetails:r,currentLocation:a,mapCenter:s,geoContext:u}=e;const c=null!=l&&l.lat&&null!=l&&l.long?{latitude:l.lat,longitude:l.long}:null,d=null!=r&&r.lat&&null!=r&&r.long?{latitude:r.lat,longitude:r.long}:null;return null!==(t=null!==(o=null!==(n=null!==(i=null!=c?c:d)&&void 0!==i?i:u)&&void 0!==n?n:a)&&void 0!==o?o:s)&&void 0!==t?t:{latitude:37.7749,longitude:122.4194}}function y(e){let{showLocationButton:t,permissionState:o,isInputEmpty:n,locationDetails:r,isCurrentLocationLoading:a,currentLocation:s,currentLocationContent:u}=e;const c=[],{askLocationAccessOption:d,fetchingLocationOption:p,useCurrentLocationOption:v}=u||{};return t&&o&&"denied"!==o&&("prompt"===o?c.push({addressLine1:(null==d?void 0:d.title)||l.k6.askLocationAccessOption.title,addressLine2:(null==d?void 0:d.subtitle)||l.k6.askLocationAccessOption.subtitle,artwork:i.Z,id:l.U0.ASK_LOCATION_ACCESS,inverseArtworkColor:!0}):n&&!r&&(a?c.push({addressLine1:(null==p?void 0:p.title)||l.k6.fetchingLocationOption.title,addressLine2:(null==p?void 0:p.subtitle)||l.k6.fetchingLocationOption.subtitle,artwork:i.Z,clickable:!1,id:l.U0.ASK_LOCATION_ACCESS,inverseArtworkColor:!0}):s&&c.push({addressLine1:(null==v?void 0:v.title)||l.k6.useCurrentLocationOption.title,addressLine2:(null==v?void 0:v.subtitle)||l.k6.useCurrentLocationOption.subtitle,artwork:i.Z,id:l.U0.SELECT_CURRENT_LOCATION,inverseArtworkColor:!0}))),c}function L(e){let{id:t,locale:o,currentLocation:n,fetchCurrentLocation:i,onFetchCurrentLocation:r,promptUserForLocation:a}=e;const s=e=>{e&&(null==r||r(),null==i||i({lang:o,lat:e.latitude,lng:e.longitude}))};switch(t){case l.U0.ASK_LOCATION_ACCESS:a().then(s);case l.U0.SELECT_CURRENT_LOCATION:s(n)}}const g=e=>{let{lat:t,long:o}=e;const n=Number(t),i=Number(o);return n&&i?{latitude:n,longitude:i}:null}},8265:(e,t,o)=>{o.d(t,{jf:()=>i,nv:()=>l,ol:()=>a,q5:()=>r});var n=o(97121);const i=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"none",[t.mediaQuery.large]:{display:"inherit"}}})),l=((0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"none",[t.mediaQuery.medium]:{display:"inherit"},[t.mediaQuery.large]:{display:"none"}}})),(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"inherit",[t.mediaQuery.medium]:{display:"none"}}}))),r=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"inherit",[t.mediaQuery.large]:{display:"none"}}})),a=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"none",[t.mediaQuery.medium]:{display:"inherit"}}}));(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"inherit",["@media screen and (min-device-width: ".concat(t.breakpoints.medium,") and (max-device-width: ").concat(t.breakpoints.large,")")]:{display:"none"}}}))},55973:(e,t,o)=>{o.d(t,{$y:()=>s,TX:()=>a,UV:()=>l,yH:()=>r});var n=o(74369),i=o(38155);const l=e=>{const t=(0,n.useContext)(i.p),[o,l]=(0,n.useState)(null);return(0,n.useEffect)((()=>{if(null!=e&&e.current){var t;const o=null===(t=e.current)||void 0===t?void 0:t.getBoundingClientRect();l(o.left+window.scrollX)}}),[e]),o&&Boolean(t.use_layover_on_pudo)?{props:{animateOutTime:100},styleOverrides:{Body:{style:{"::before":{background:"transparent",content:'""',height:"100vh",position:"fixed",transform:"translate(".concat(-1*o,"px, 0px)"),width:"100vw"}}}}}:{}},r=(e,t)=>{const o=(0,n.useContext)(i.p);return Boolean(o.use_paste_on_pudo)?null!=e&&e.addressLine1||t?{width:"2px"}:{width:"100%"}:{}},a=()=>{const e=(0,n.useContext)(i.p);return Boolean(e.use_paste_on_pudo)?{marginInlineStart:"2px",pointerEvents:"none",position:"absolute"}:{}},s=()=>{const e=(0,n.useContext)(i.p),t=Boolean(e.hide_keyboard_on_scroll_mobile),[o,l]=(0,n.useState)(!1);return{handleSetScroll:t?e=>l(e):()=>{},scrolled:o}}}}]);