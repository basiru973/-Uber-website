"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[212],{90212:(t,e,s)=>{s.d(e,{q:()=>Ft});var i,r,n,a,o,h,u,l,c,d,p,f,v,b,w,g,y,m,R,k,O,C,P,S=s(74369),E=s(41942),M=s(22891),W=s(50474),F=s(77275),x=s(42523),U=s(31180),T=s(77142),Q=s(46295);function q(t,e){L(t,e),e.add(t)}function N(t,e,s){L(t,e),e.set(t,s)}function L(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function K(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,V(t,e,"get"))}function D(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,V(t,e,"set"),s),s}function V(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}var A=(i=new WeakMap,r=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,v=new WeakMap,b=new WeakMap,w=new WeakSet,g=new WeakSet,y=new WeakSet,m=new WeakSet,R=new WeakSet,k=new WeakSet,O=new WeakSet,C=new WeakSet,P=new WeakSet,class extends T.l{constructor(t,e){super(),q(this,P),q(this,C),q(this,O),q(this,k),q(this,R),q(this,m),q(this,y),q(this,g),q(this,w),N(this,i,{writable:!0,value:void 0}),N(this,r,{writable:!0,value:void 0}),N(this,n,{writable:!0,value:void 0}),N(this,a,{writable:!0,value:void 0}),N(this,o,{writable:!0,value:void 0}),N(this,h,{writable:!0,value:void 0}),N(this,u,{writable:!0,value:void 0}),N(this,l,{writable:!0,value:void 0}),N(this,c,{writable:!0,value:void 0}),N(this,d,{writable:!0,value:void 0}),N(this,p,{writable:!0,value:void 0}),N(this,f,{writable:!0,value:void 0}),N(this,v,{writable:!0,value:void 0}),N(this,b,{writable:!0,value:new Set}),this.options=e,D(this,i,t),D(this,u,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(K(this,r).addObserver(this),X(K(this,r),this.options)?I(this,w,j).call(this):this.updateResult(),I(this,R,_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $(K(this,r),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $(K(this,r),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,I(this,k,H).call(this),I(this,O,Y).call(this),K(this,r).removeObserver(this)}setOptions(t,e){const s=this.options,n=K(this,r);if(this.options=K(this,i).defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");I(this,C,Z).call(this),K(this,r).setOptions(this.options),s._defaulted&&!(0,F.VS)(this.options,s)&&K(this,i).getQueryCache().notify({type:"observerOptionsUpdated",query:K(this,r),observer:this});const a=this.hasListeners();a&&tt(K(this,r),n,this.options,s)&&I(this,w,j).call(this),this.updateResult(e),!a||K(this,r)===n&&this.options.enabled===s.enabled&&this.options.staleTime===s.staleTime||I(this,g,z).call(this);const o=I(this,y,B).call(this);!a||K(this,r)===n&&this.options.enabled===s.enabled&&o===K(this,v)||I(this,m,G).call(this,o)}getOptimisticResult(t){const e=K(this,i).getQueryCache().build(K(this,i),t),s=this.createResult(e,t);return function(t,e){if(!(0,F.VS)(t.getCurrentResult(),e))return!0;return!1}(this,s)&&(D(this,a,s),D(this,h,this.options),D(this,o,K(this,r).state)),s}getCurrentResult(){return K(this,a)}trackResult(t,e){const s={};return Object.keys(t).forEach((i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),null==e||e(i),t[i])})})),s}trackProp(t){K(this,b).add(t)}getCurrentQuery(){return K(this,r)}refetch(){let{...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...t})}fetchOptimistic(t){const e=K(this,i).defaultQueryOptions(t),s=K(this,i).getQueryCache().build(K(this,i),e);return s.isFetchingOptimistic=!0,s.fetch().then((()=>this.createResult(s,e)))}fetch(t){var e;return I(this,w,j).call(this,{...t,cancelRefetch:null===(e=t.cancelRefetch)||void 0===e||e}).then((()=>(this.updateResult(),K(this,a))))}createResult(t,e){const s=K(this,r),i=this.options,p=K(this,a),f=K(this,o),v=K(this,h),b=t!==s?t.state:K(this,n),{state:w}=t;let g,y={...w},m=!1;if(e._optimisticResults){const r=this.hasListeners(),n=!r&&X(t,e),a=r&&tt(t,s,e,i);(n||a)&&(y={...y,...(0,Q.z)(w.data,t.options)}),"isRestoring"===e._optimisticResults&&(y.fetchStatus="idle")}let{error:R,errorUpdatedAt:k,status:O}=y;if(e.select&&void 0!==y.data)if(p&&y.data===(null==f?void 0:f.data)&&e.select===K(this,l))g=K(this,c);else try{D(this,l,e.select),g=e.select(y.data),g=(0,F.oE)(null==p?void 0:p.data,g,e),D(this,c,g),D(this,u,null)}catch(t){D(this,u,t)}else g=y.data;if(void 0!==e.placeholderData&&void 0===g&&"pending"===O){let t;var C;if(null!=p&&p.isPlaceholderData&&e.placeholderData===(null==v?void 0:v.placeholderData))t=p.data;else if(t="function"==typeof e.placeholderData?e.placeholderData(null===(C=K(this,d))||void 0===C?void 0:C.state.data,K(this,d)):e.placeholderData,e.select&&void 0!==t)try{t=e.select(t),D(this,u,null)}catch(t){D(this,u,t)}void 0!==t&&(O="success",g=(0,F.oE)(null==p?void 0:p.data,t,e),m=!0)}K(this,u)&&(R=K(this,u),g=K(this,c),k=Date.now(),O="error");const P="fetching"===y.fetchStatus,S="pending"===O,E="error"===O,M=S&&P,W=void 0!==g;return{status:O,fetchStatus:y.fetchStatus,isPending:S,isSuccess:"success"===O,isError:E,isInitialLoading:M,isLoading:M,data:g,dataUpdatedAt:y.dataUpdatedAt,error:R,errorUpdatedAt:k,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>b.dataUpdateCount||y.errorUpdateCount>b.errorUpdateCount,isFetching:P,isRefetching:P&&!S,isLoadingError:E&&!W,isPaused:"paused"===y.fetchStatus,isPlaceholderData:m,isRefetchError:E&&W,isStale:et(t,e),refetch:this.refetch}}updateResult(t){const e=K(this,a),s=this.createResult(K(this,r),this.options);if(D(this,o,K(this,r).state),D(this,h,this.options),void 0!==K(this,o).data&&D(this,d,K(this,r)),(0,F.VS)(s,e))return;D(this,a,s);const i={};!1!==(null==t?void 0:t.listeners)&&(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!K(this,b).size)return!0;const i=new Set(null!=s?s:K(this,b));return this.options.throwOnError&&i.add("error"),Object.keys(K(this,a)).some((t=>{const s=t;return K(this,a)[s]!==e[s]&&i.has(s)}))})()&&(i.listeners=!0),I(this,P,J).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&I(this,R,_).call(this)}});function j(t){I(this,C,Z).call(this);let e=K(this,r).fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(F.ZT)),e}function z(){if(I(this,k,H).call(this),F.sk||K(this,a).isStale||!(0,F.PN)(this.options.staleTime))return;const t=(0,F.Kp)(K(this,a).dataUpdatedAt,this.options.staleTime);D(this,p,setTimeout((()=>{K(this,a).isStale||this.updateResult()}),t+1))}function B(){var t;return null!==(t="function"==typeof this.options.refetchInterval?this.options.refetchInterval(K(this,r)):this.options.refetchInterval)&&void 0!==t&&t}function G(t){I(this,O,Y).call(this),D(this,v,t),!F.sk&&!1!==this.options.enabled&&(0,F.PN)(K(this,v))&&0!==K(this,v)&&D(this,f,setInterval((()=>{(this.options.refetchIntervalInBackground||U.j.isFocused())&&I(this,w,j).call(this)}),K(this,v)))}function _(){I(this,g,z).call(this),I(this,m,G).call(this,I(this,y,B).call(this))}function H(){K(this,p)&&(clearTimeout(K(this,p)),D(this,p,void 0))}function Y(){K(this,f)&&(clearInterval(K(this,f)),D(this,f,void 0))}function Z(){const t=K(this,i).getQueryCache().build(K(this,i),this.options);if(t===K(this,r))return;const e=K(this,r);D(this,r,t),D(this,n,t.state),this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}function J(t){x.V.batch((()=>{t.listeners&&this.listeners.forEach((t=>{t(K(this,a))})),K(this,i).getQueryCache().notify({query:K(this,r),type:"observerResultsUpdated"})}))}function X(t,e){return function(t,e){return!1!==e.enabled&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&$(t,e,e.refetchOnMount)}function $(t,e,s){if(!1!==e.enabled){const i="function"==typeof s?s(t):s;return"always"===i||!1!==i&&et(t,e)}return!1}function tt(t,e,s,i){return(t!==e||!1===i.enabled)&&(!s.suspense||"error"!==t.state.status)&&et(t,s)}function et(t,e){return!1!==e.enabled&&t.isStaleByTime(e.staleTime)}function st(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var it=S.createContext(st()),rt=S.createContext(!1);rt.Provider;function nt(t,e){return"function"==typeof t?t(...e):!!t}function at(){}function ot(t,e,s){const i=(0,W.NL)(s),r=S.useContext(rt),n=S.useContext(it),a=i.defaultQueryOptions(t);a._optimisticResults=r?"isRestoring":"optimistic",(t=>{t.suspense&&"number"!=typeof t.staleTime&&(t.staleTime=1e3)})(a),((t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))})(a,n),(t=>{S.useEffect((()=>{t.clearReset()}),[t])})(n);const[o]=S.useState((()=>new e(i,a))),h=o.getOptimisticResult(a);if(S.useSyncExternalStore(S.useCallback((t=>{const e=r?()=>{}:o.subscribe(x.V.batchCalls(t));return o.updateResult(),e}),[o,r]),(()=>o.getCurrentResult()),(()=>o.getCurrentResult())),S.useEffect((()=>{o.setOptions(a,{listeners:!1})}),[a,o]),((t,e)=>(null==t?void 0:t.suspense)&&e.isPending)(a,h))throw((t,e,s)=>e.fetchOptimistic(t).catch((()=>{s.clearReset()})))(a,o,n);if((t=>{let{result:e,errorResetBoundary:s,throwOnError:i,query:r}=t;return e.isError&&!s.isReset()&&!e.isFetching&&r&&nt(i,[e.error,r])})({result:h,errorResetBoundary:n,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash)}))throw h.error;return a.notifyOnChangeProps?h:o.trackResult(h)}var ht=s(96686),ut=class extends A{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t,e){super.setOptions({...t,behavior:(0,ht.Gm)()},e)}getOptimisticResult(t){return t.behavior=(0,ht.Gm)(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var s;const{state:i}=t,r=super.createResult(t,e),{isFetching:n,isRefetching:a,isError:o,isRefetchError:h}=r,u=null===(s=i.fetchMeta)||void 0===s||null===(s=s.fetchMore)||void 0===s?void 0:s.direction,l=o&&"forward"===u,c=n&&"forward"===u,d=o&&"backward"===u,p=n&&"backward"===u;return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,ht.Qy)(e,i.data),hasPreviousPage:(0,ht.ZF)(e,i.data),isFetchNextPageError:l,isFetchingNextPage:c,isFetchPreviousPageError:d,isFetchingPreviousPage:p,isRefetchError:h&&!l&&!d,isRefetching:a&&!c&&!p}}};var lt,ct,dt,pt,ft,vt,bt=s(54220);function wt(t,e){yt(t,e),e.add(t)}function gt(t,e,s){yt(t,e),e.set(t,s)}function yt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ot(t,e,"get"))}function Rt(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function kt(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,Ot(t,e,"set"),s),s}function Ot(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}var Ct=(lt=new WeakMap,ct=new WeakMap,dt=new WeakMap,pt=new WeakMap,ft=new WeakSet,vt=new WeakSet,class extends T.l{constructor(t,e){super(),wt(this,vt),wt(this,ft),gt(this,lt,{writable:!0,value:void 0}),gt(this,ct,{writable:!0,value:void 0}),gt(this,dt,{writable:!0,value:void 0}),gt(this,pt,{writable:!0,value:void 0}),kt(this,lt,t),this.setOptions(e),this.bindMethods(),Rt(this,ft,Pt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=mt(this,lt).defaultMutationOptions(t),(0,F.VS)(this.options,s)||mt(this,lt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:mt(this,dt),observer:this}),null!=s&&s.mutationKey&&this.options.mutationKey&&(0,F.Ym)(s.mutationKey)!==(0,F.Ym)(this.options.mutationKey)?this.reset():"pending"===(null===(e=mt(this,dt))||void 0===e?void 0:e.state.status)&&mt(this,dt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null===(t=mt(this,dt))||void 0===t||t.removeObserver(this))}onMutationUpdate(t){Rt(this,ft,Pt).call(this),Rt(this,vt,St).call(this,t)}getCurrentResult(){return mt(this,ct)}reset(){var t;null===(t=mt(this,dt))||void 0===t||t.removeObserver(this),kt(this,dt,void 0),Rt(this,ft,Pt).call(this),Rt(this,vt,St).call(this)}mutate(t,e){var s;return kt(this,pt,e),null===(s=mt(this,dt))||void 0===s||s.removeObserver(this),kt(this,dt,mt(this,lt).getMutationCache().build(mt(this,lt),this.options)),mt(this,dt).addObserver(this),mt(this,dt).execute(t)}});function Pt(){var t,e;const s=null!==(t=null===(e=mt(this,dt))||void 0===e?void 0:e.state)&&void 0!==t?t:(0,bt.R)();kt(this,ct,{...s,isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset})}function St(t){x.V.batch((()=>{if(mt(this,pt)&&this.hasListeners()){const u=mt(this,ct).variables,l=mt(this,ct).context;var e,s,i,r;if("success"===(null==t?void 0:t.type))null===(e=(s=mt(this,pt)).onSuccess)||void 0===e||e.call(s,t.data,u,l),null===(i=(r=mt(this,pt)).onSettled)||void 0===i||i.call(r,t.data,null,u,l);else if("error"===(null==t?void 0:t.type)){var n,a,o,h;null===(n=(a=mt(this,pt)).onError)||void 0===n||n.call(a,t.error,u,l),null===(o=(h=mt(this,pt)).onSettled)||void 0===o||o.call(h,void 0,t.error,u,l)}}this.listeners.forEach((t=>{t(mt(this,ct))}))}))}s(59924);const Et={registerEffect:()=>!0},Mt=(0,S.createContext)(Et),Wt=Symbol("rpc-skip-token"),Ft=()=>{const t=(0,E.H1)(),e=()=>{const e=(0,S.useContext)(M.GM);return(0,M.G2)(t).from(e)},s=(t,e)=>(0,S.useMemo)((()=>[t,e]),[t,e]);return{useRpcQueryKey:s,useRpcQuery:(t,i,r)=>{const n=e(),a=s(t,i),o=(0,W.NL)(),{registerEffect:h}=(0,S.useContext)(Mt),u={queryKey:a,queryFn:i===Wt?F.CN:e=>{let{signal:s}=e;return n.request(t,i,void 0,{signal:s})},...r},{queryKeyHashFn:l=F.Ym}=u;return!1!==u.enabled&&h((()=>[t.toString(),l(u.queryKey)]),(()=>o.prefetchQuery(u))),function(t,e){return ot(t,A,e)}(u)},useRpcInfiniteQuery:(t,i,r)=>{const n=e();return function(t,e){return ot(t,ut,e)}({queryKey:s(t,i()),initialPageParam:void 0,queryFn:e=>n.request(t,i(e.pageParam),void 0,{signal:e.signal}),...r})},useRpcMutation:(t,s)=>{const i=e();return function(t,e){const s=(0,W.NL)(e),[i]=S.useState((()=>new Ct(s,t)));S.useEffect((()=>{i.setOptions(t)}),[i,t]);const r=S.useSyncExternalStore(S.useCallback((t=>i.subscribe(x.V.batchCalls(t))),[i]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),n=S.useCallback(((t,e)=>{i.mutate(t,e).catch(at)}),[i]);if(r.error&&nt(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:n,mutateAsync:r.mutate}}({mutationFn:e=>i.request(t,e),...s})}}}}}]);